!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Engage",[],e):"object"==typeof exports?exports.Engage=e():t.Engage=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){if(t=t||{},a.requireOpts(t,["site","device","permalink","articleId","published"]),i(this,{site:t.site,device:t.device,permalink:t.permalink,articleId:t.articleId,category:t.category||null,group:t.group||null,authors:t.authors||[],wordCount:t.wordCount||null,imageUrl:t.imageUrl||null,endpoint:t.endpoint||"https://collector.schibsted.io/api/v1/track",userId:t.userId||null}),"object"!=typeof t.previewUrl&&(t.previewUrl={}),this.previewUrl={http:t.previewUrl.http||null,https:t.previewUrl.https||null},"undefined"==typeof t.pingInterval?this.pingInterval=5:this.pingInterval=t.pingInterval,t.published instanceof Date?this.published=t.published:this.published=a.isoToDate(t.published),!t.updated||t.updated instanceof Date?this.updated=t.updated||null:this.updated=a.isoToDate(t.updated),t.title?this.title=t.title:this.title=window.document.title,t.shareUrl=t.shareUrl||{},o("object"==typeof t.shareUrl,"ShareUrl must be an object"),this.shareUrl={facebook:t.shareUrl.facebook||t.permalink,twitter:t.shareUrl.twitter||t.permalink},t.group&&t.group.length>256)throw new Error("Group can not be longer then 256 characters")}var i=r(1),o=r(26),s=r(31),a=r(43),c=r(44);n.prototype.initialize=function(){this.imageUrl||(this.imageUrl=this.getImageUrl());var t=null;if(this.category&&!a.isNumeric(this.category)&&(t=this.category),this.pulse=new s({pageId:this.articleId,clientId:this.site,pageType:"Article",url:this.endpoint,userId:this.userId,category:t,provider:{"spt:engage":this.site}}),this.articleView(),this.pingInterval){var e=new c(this.pulse,this.device,this.pingInterval);e.initialize()}},n.prototype.getImageUrl=function(){for(var t,e=document.getElementsByTagName("meta"),r=null,n=0;n<e.length;n++)if(t=e[n].getAttribute("property"),"og:image"===t){r=e[n].content;break}return r},n.prototype.articleView=function(){var t;t=this.updated?a.dateToISO(this.updated):null;var e={"spt:site":this.site,"spt:articleId":this.articleId,"spt:group":this.group,"spt:device":this.device,"spt:permalink":this.permalink,"spt:shareUrl":this.shareUrl,"spt:previewUrl":this.previewUrl,"spt:referrer":document.referrer,"spt:published":a.dateToISO(this.published),"spt:updated":t,"spt:authors":this.authors,"spt:wordCount":this.wordCount,"spt:imageUrl":this.imageUrl},r=this.pulse.events.trackContentView(this.title);r.addCustomData("primary",e).send()},n.benchmark=r(48),t.exports=n},function(t,e,r){var n=r(2),i=r(22),o=i(n);t.exports=o},function(t,e,r){function n(t,e,r){var n=o(e);if(!r)return i(e,t,n);for(var s=-1,a=n.length;++s<a;){var c=n[s],u=t[c],l=r(u,e[c],c,t,e);(l===l?l===u:u!==u)&&("undefined"!=typeof u||c in t)||(t[c]=l)}return t}var i=r(3),o=r(4);t.exports=n},function(t,e){function r(t,e,r){r||(r=e,e={});for(var n=-1,i=r.length;++n<i;){var o=r[n];e[o]=t[o]}return e}t.exports=r},function(t,e,r){var n=r(5),i=r(6),o=r(11),s=r(12),a=r(14),c=i(c=Object.keys)&&c,u=c?function(t){if(t)var e=t.constructor,r=t.length;return"function"==typeof e&&e.prototype===t||("function"==typeof t?a.enumPrototypes:r&&n(r))?s(t):o(t)?c(t):[]}:s;t.exports=u},function(t,e){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&n>=t}var n=Math.pow(2,53)-1;t.exports=r},function(t,e,r){function n(t){return null==t?!1:d.call(t)==a?p.test(l.call(t)):s(t)&&(o(t)?p:c).test(t)||!1}var i=r(7),o=r(9),s=r(10),a="[object Function]",c=/^\[object .+?Constructor\]$/,u=Object.prototype,l=Function.prototype.toString,d=u.toString,p=RegExp("^"+i(d).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e,r){function n(t){return t=i(t),t&&s.test(t)?t.replace(o,"\\$&"):t}var i=r(8),o=/[.*+?^${}()|[\]\/\\]/g,s=RegExp(o.source);t.exports=n},function(t,e){function r(t){return"string"==typeof t?t:null==t?"":t+""}t.exports=r},function(t,e){var r=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();t.exports=r},function(t,e){function r(t){return t&&"object"==typeof t||!1}t.exports=r},function(t,e){function r(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}t.exports=r},function(t,e,r){function n(t){for(var e=u(t),r=e.length,n=r&&t.length,d=n&&a(n)&&(o(t)||l.nonEnumStrings&&c(t)||l.nonEnumArgs&&i(t)),f=-1,h=[];++f<r;){var g=e[f];(d&&s(g,n)||p.call(t,g))&&h.push(g)}return h}var i=r(13),o=r(15),s=r(16),a=r(5),c=r(17),u=r(18),l=r(14),d=Object.prototype,p=d.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){var e=o(t)?t.length:void 0;return i(e)&&l.call(t)==a||!1}var i=r(5),o=r(10),s=r(14),a="[object Arguments]",c=Object.prototype,u=c.hasOwnProperty,l=c.toString,d=c.propertyIsEnumerable;s.argsTag||(n=function(t){var e=o(t)?t.length:void 0;return i(e)&&u.call(t,"callee")&&!d.call(t,"callee")||!1}),t.exports=n},function(t,e,r){(function(e){var n=r(6),i="[object Arguments]",o="[object Object]",s=/\bthis\b/,a=Array.prototype,c=Error.prototype,u=Object.prototype,l=(l=e.window)&&l.document,d=u.toString,p=u.propertyIsEnumerable,f=a.splice,h={};!function(t){var r=function(){this.x=1},a={0:1,length:1},u=[];r.prototype={valueOf:1,y:1};for(var g in new r)u.push(g);h.argsTag=d.call(arguments)==i,h.enumErrorProps=p.call(c,"message")||p.call(c,"name"),h.enumPrototypes=p.call(r,"prototype"),h.funcDecomp=!n(e.WinRTError)&&s.test(function(){return this}),h.funcNames="string"==typeof Function.name,h.nodeTag=d.call(l)!=o,h.nonEnumStrings=!p.call("x",0),h.nonEnumShadows=!/valueOf/.test(u),h.ownLast="x"!=u[0],h.spliceObjects=(f.call(a,0,1),!a[0]),h.unindexedChars="x"[0]+Object("x")[0]!="xx";try{h.dom=11===l.createDocumentFragment().nodeType}catch(y){h.dom=!1}try{h.nonEnumArgs=!p.call(arguments,1)}catch(y){h.nonEnumArgs=!0}}(0,0),t.exports=h}).call(e,function(){return this}())},function(t,e,r){var n=r(5),i=r(6),o=r(10),s="[object Array]",a=Object.prototype,c=a.toString,u=i(u=Array.isArray)&&u,l=u||function(t){return o(t)&&n(t.length)&&c.call(t)==s||!1};t.exports=l},function(t,e){function r(t,e){return t=+t,e=null==e?n:e,t>-1&&t%1==0&&e>t}var n=Math.pow(2,53)-1;t.exports=r},function(t,e,r){function n(t){return"string"==typeof t||i(t)&&a.call(t)==o||!1}var i=r(10),o="[object String]",s=Object.prototype,a=s.toString;t.exports=n},function(t,e,r){function n(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&u(e)&&(s(t)||p.nonEnumStrings&&d(t)||p.nonEnumArgs&&o(t))&&e||0;for(var r=t.constructor,n=-1,i=a(r)&&r.prototype||S,f=i===t,h=Array(e),g=e>0,v=p.enumErrorProps&&(t===x||t instanceof Error),m=p.enumPrototypes&&a(t);++n<e;)h[n]=n+"";for(var w in t)m&&"prototype"==w||v&&("message"==w||"name"==w)||g&&c(w,e)||"constructor"==w&&(f||!k.call(t,w))||h.push(w);if(p.nonEnumShadows&&t!==S){var U=t===T?I:t===x?y:E.call(t),C=O[U]||O[b];for(U==b&&(i=S),e=j.length;e--;){w=j[e];var A=C[w];f&&A||(A?!k.call(t,w):t[w]===i[w])||h.push(w)}}return h}var i=r(19),o=r(13),s=r(15),a=r(20),c=r(16),u=r(5),l=r(11),d=r(17),p=r(14),f="[object Array]",h="[object Boolean]",g="[object Date]",y="[object Error]",v="[object Function]",m="[object Number]",b="[object Object]",w="[object RegExp]",I="[object String]",j=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=Error.prototype,S=Object.prototype,T=String.prototype,k=S.hasOwnProperty,E=S.toString,O={};O[f]=O[g]=O[m]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},O[h]=O[I]={constructor:!0,toString:!0,valueOf:!0},O[y]=O[v]=O[w]={constructor:!0,toString:!0},O[b]={constructor:!0},i(j,function(t){for(var e in O)if(k.call(O,e)){var r=O[e];r[t]=k.call(r,t)}}),t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}t.exports=r},function(t,e,r){(function(e){var n=r(21),i=r(6),o="[object Function]",s=Object.prototype,a=s.toString,c=i(c=e.Uint8Array)&&c,u=n(/x/)||c&&!n(c)?function(t){return a.call(t)==o}:n;t.exports=u}).call(e,function(){return this}())},function(t,e){function r(t){return"function"==typeof t||!1}t.exports=r},function(t,e,r){function n(t){return function(){var e=arguments.length,r=arguments[0];if(2>e||null==r)return r;if(e>3&&o(arguments[1],arguments[2],arguments[3])&&(e=2),e>3&&"function"==typeof arguments[e-2])var n=i(arguments[--e-1],arguments[e--],5);else e>2&&"function"==typeof arguments[e-1]&&(n=arguments[--e]);for(var s=0;++s<e;){var a=arguments[s];a&&t(r,a,n)}return r}}var i=r(23),o=r(25);t.exports=n},function(t,e,r){function n(t,e,r){if("function"!=typeof t)return i;if("undefined"==typeof e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,s){return t.call(e,r,n,i,o,s)}}return function(){return t.apply(e,arguments)}}var i=r(24);t.exports=n},function(t,e){function r(t){return t}t.exports=r},function(t,e,r){function n(t,e,r){if(!s(r))return!1;var n=typeof e;if("number"==n)var a=r.length,c=o(a)&&i(e,a);else c="string"==n&&e in r;if(c){var u=r[e];return t===t?t===u:u!==u}return!1}var i=r(16),o=r(5),s=r(11);t.exports=n},function(t,e,r){function n(t,e){return f.isUndefined(e)?""+e:f.isNumber(e)&&!isFinite(e)?e.toString():f.isFunction(e)||f.isRegExp(e)?e.toString():e}function i(t,e){return f.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return i(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,n),128)}function s(t,e,r,n,i){throw new y.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function a(t,e){t||s(t,!0,e,"==",y.ok)}function c(t,e){if(t===e)return!0;if(f.isBuffer(t)&&f.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return f.isDate(t)&&f.isDate(e)?t.getTime()===e.getTime():f.isRegExp(t)&&f.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:f.isObject(t)||f.isObject(e)?l(t,e):t==e}function u(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function l(t,e){if(f.isNullOrUndefined(t)||f.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(f.isPrimitive(t)||f.isPrimitive(e))return t===e;var r=u(t),n=u(e);if(r&&!n||!r&&n)return!1;if(r)return t=h.call(t),e=h.call(e),c(t,e);var i,o,s=v(t),a=v(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!c(t[i],e[i]))return!1;return!0}function d(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function p(t,e,r,n){var i;f.isString(r)&&(n=r,r=null);try{e()}catch(o){i=o}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&s(i,r,"Missing expected exception"+n),!t&&d(i,r)&&s(i,r,"Got unwanted exception"+n),t&&i&&r&&!d(i,r)||!t&&i)throw i}var f=r(27),h=Array.prototype.slice,g=Object.prototype.hasOwnProperty,y=t.exports=a;y.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=e.name,a=n.indexOf("\n"+i);if(a>=0){var c=n.indexOf("\n",a+1);n=n.substring(c+1)}this.stack=n}}},f.inherits(y.AssertionError,Error),y.fail=s,y.ok=a,y.equal=function(t,e,r){t!=e&&s(t,e,r,"==",y.equal)},y.notEqual=function(t,e,r){t==e&&s(t,e,r,"!=",y.notEqual)},y.deepEqual=function(t,e,r){c(t,e)||s(t,e,r,"deepEqual",y.deepEqual)},y.notDeepEqual=function(t,e,r){c(t,e)&&s(t,e,r,"notDeepEqual",y.notDeepEqual)},y.strictEqual=function(t,e,r){t!==e&&s(t,e,r,"===",y.strictEqual)},y.notStrictEqual=function(t,e,r){t===e&&s(t,e,r,"!==",y.notStrictEqual)},y["throws"]=function(t,e,r){p.apply(this,[!0].concat(h.call(arguments)))},y.doesNotThrow=function(t,e){p.apply(this,[!1].concat(h.call(arguments)))},y.ifError=function(t){if(t)throw t};var v=Object.keys||function(t){var e=[];for(var r in t)g.call(t,r)&&e.push(r);return e}},function(t,e,r){(function(t,n){function i(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&e._extend(n,r),I(n.showHidden)&&(n.showHidden=!1),I(n.depth)&&(n.depth=2),I(n.colors)&&(n.colors=!1),I(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),c(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function c(t,r,n){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return b(i)||(i=c(t,i,n)),i}var o=u(t,r);if(o)return o;var s=Object.keys(r),g=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),T(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(k(r)){var y=r.name?": "+r.name:"";return t.stylize("[Function"+y+"]","special")}if(j(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return t.stylize(Date.prototype.toString.call(r),"date");if(T(r))return l(r)}var v="",m=!1,w=["{","}"];if(h(r)&&(m=!0,w=["[","]"]),k(r)){var I=r.name?": "+r.name:"";v=" [Function"+I+"]"}if(j(r)&&(v=" "+RegExp.prototype.toString.call(r)),S(r)&&(v=" "+Date.prototype.toUTCString.call(r)),T(r)&&(v=" "+l(r)),0===s.length&&(!m||0==r.length))return w[0]+v+w[1];if(0>n)return j(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var x;return x=m?d(t,r,n,g,s):s.map(function(e){return p(t,r,n,g,e,m)}),t.seen.pop(),f(x,v,w)}function u(t,e){if(I(e))return t.stylize("undefined","undefined");if(b(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return m(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,r,n,i){for(var o=[],s=0,a=e.length;a>s;++s)A(e,String(s))?o.push(p(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,r,n,i,!0))}),o}function p(t,e,r,n,i,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),A(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=y(r)?c(t,u.value,null):c(t,u.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),I(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function h(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function I(t){return void 0===t}function j(t){return x(t)&&"[object RegExp]"===O(t)}function x(t){return"object"==typeof t&&null!==t}function S(t){return x(t)&&"[object Date]"===O(t)}function T(t){return x(t)&&("[object Error]"===O(t)||t instanceof Error)}function k(t){return"function"==typeof t}function E(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function O(t){return Object.prototype.toString.call(t)}function U(t){return 10>t?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,e=[U(t.getHours()),U(t.getMinutes()),U(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(R,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),a=n[r];o>r;a=n[++r])s+=y(a)||!x(a)?" "+a:" "+i(a);return s},e.deprecate=function(r,i){function o(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),s=!0}return r.apply(this,arguments)}if(I(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var s=!1;return o};var M,D={};e.debuglog=function(t){if(I(M)&&(M=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(M)){var r=n.pid;D[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else D[t]=function(){};return D[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=g,e.isNull=y,e.isNullOrUndefined=v,e.isNumber=m,e.isString=b,e.isSymbol=w,e.isUndefined=I,e.isRegExp=j,e.isObject=x,e.isDate=S,e.isError=T,e.isFunction=k,e.isPrimitive=E,e.isBuffer=r(29);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=r(30),e._extend=function(t,e){if(!e||!x(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,function(){return this}(),r(28))},function(t,e){function r(){u=!1,s.length?c=s.concat(c):l=-1,c.length&&n()}function n(){if(!u){var t=setTimeout(r);u=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,u=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},c=[],u=!1,l=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new i(t,e)),1!==c.length||u||setTimeout(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";function n(t){if(!t.clientId)throw new Error("clientId is required");this.vars=o,this.version=d,this.clientId=("urn:schibsted.com:"+t.clientId).toLowerCase(),t.url?this.url=t.url+"/"+this.clientId:this.url=this.vars.envVars.dataCollectorUrl+"/"+this.clientId,t.transport?this.transport=t.transport:this.transport=l,t.respectDoNotTrack===!0&&1===navigator.doNotTrack?this.allowTracking=!1:this.allowTracking=!0,this.opts=t,this.pageViewId=c.getUuidV4(),this.contentId=t.contentId||t.pageId||document.location,this.contentType=t.contentType||t.pageType||"Content",this.provider=t.provider||{},this.objectMeta=t.object||{},this.userIdDomain=t.userIdDomain||"schibsted.com",this.noRedirect=!0,this.utils=c,this.queue=[],t.userId&&(this.userId=t.userId),this.events=new a(this),this.user=new u({userId:this.userId,userServiceUrl:this.opts.userServiceUrl,noRedirect:this.noRedirect,transport:this.transport,utils:this.utils}),this.initIds(function(){})}var i=r(32)("spt:pulse"),o={};try{o=r(35)}catch(s){o=r(36)}var a=r(37),c=r(39),u=r(41),l=r(40),d=r(42).version;n.prototype.initIds=function(t){t=t||function(){};var e=this;i("Fetching Ids"),this.user.getUserId(function(r,n){return r?(i("Failed to fetch ids from CIS",r),delete e.envId):(e.userId||(e.userId=n.userId),e.envId=n.envId),e.waitingToTransmitQueue===!0&&(e.sendQueue(),e.waitingToTransmitQueue=!1),t(n)})},n.prototype.addToQueue=function(t){this.queue.push(t)},n.prototype.sendQueue=function(t){if(t||(t=function(){}),!this.queue.length)return t();if(!this.allowTracking)return t();if("undefined"==typeof this.envId)return this.waitingToTransmitQueue=!0,t();i("Sending queue");for(var e=this.queue.slice(0),r=0;r<e.length;r++)this.enrichEvents(e[r]);this.queue=[];var n=this;this.transport(this.url,e,function(r){r?(i("Failed to send queue"),n.queue=n.queue.concat(e),t(r)):t()})},n.prototype.send=function(t,e){if(e||(e=function(){}),!this.allowTracking)return e();if("undefined"==typeof this.envId)return this.addToQueue(t),this.waitingToTransmitQueue=!0,e();i("Sending object");var r=this;this.enrichEvents(t),this.transport(this.url,[t],function(n){n?(i("Failed to send object"),r.addToQueue(t),e(n)):e()})},n.prototype.enrichEvents=function(t){this.addObjectCustom(t),this.addUserId(t)},n.prototype.addUserId=function(t){t.actor&&this.envId&&"undefined"!==this.envId&&(0!==String(this.envId).indexOf("urn:")?(t.actor["@id"]="urn:schibsted.com:environment:"+this.envId,t.actor["spt:environmentId"]="urn:schibsted.com:environment:"+this.envId):(t.actor["@id"]=this.envId,t.actor["spt:environmentId"]=this.envId),this.userId&&-1===String(this.userId).indexOf("undefined")&&(0!==String(this.userId).indexOf("urn:")?t.actor["spt:userId"]="urn:"+this.userIdDomain+":user:"+this.userId:t.actor["spt:userId"]=this.userId))},n.prototype.addObjectCustom=function(t){if(this.objectMeta){t.object||(t.object={}),t.object["spt:custom"]||(t.object["spt:custom"]={});for(var e in this.objectMeta)this.objectMeta.hasOwnProperty(e)&&(t.object["spt:custom"][e]=this.objectMeta[e])}},n.prototype.createActor=function(){var t={};return t["@type"]="Person",t["spt:userAgent"]=navigator.userAgent,t["spt:screenSize"]=window.screen.width+"x"+window.screen.height,t["spt:viewportSize"]=c.getViewportDimensions(),t["spt:acceptLanguage"]=c.getDeviceLanguage(),t},n.prototype.createReducedActor=function(){var t={};return t["@type"]="Person",t},n.prototype.createProvider=function(){var t={};t["@type"]="Organization",t["@id"]=this.clientId,t.url=document.URL;for(var e in this.provider)this.provider.hasOwnProperty(e)&&(t[e]=this.provider[e]);return t},n.prototype.createScaffold=function(t){var e={};return e.application={"spt:sdkType":"JS","spt:sdkVersion":this.version},e["@context"]="http://schema.schibsted.com/ns/events/0.1#",e["@id"]=c.getUuidV4(),e["spt:pageViewId"]=this.pageViewId,e.published=c.getTimestamp(),t?e.actor=this.createActor():e.actor=this.createReducedActor(),e.provider=this.createProvider(),e},n.prototype.getPageViewId=function(){return this.pageViewId},n.prototype.getSessionId=function(){console.log("Deprecated: getSessionId")},n.prototype.refreshUserIds=function(t){this.user.idObj.userId=t||void 0,this.userId=t||void 0,t?this.loggedIn=!0:this.loggedIn=!1,this.user.setIdsInCookie();var e=this;this.user.getUserId(function(t,r){if(t)throw new Error("Could not fetch id");e.userId||(e.userId=r.userId),e.envId=r.envId,e.waitingToTransmitQueue===!0&&(e.sendQueue(),e.waitingToTransmitQueue=!1)})},t.exports=n},function(t,e,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,n),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(r){}}function a(){var t;try{t=e.storage.debug}catch(r){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=r(33),e.log=o,e.formatArgs=i,e.save=s,e.load=a,e.useColors=n,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,r){function n(){return e.colors[l++%e.colors.length]}function i(t){function r(){}function i(){var t=i,r=+new Date,o=r-(u||r);t.diff=o,t.prev=u,t.curr=r,u=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var i=e.formatters[n];if("function"==typeof i){var o=s[a];r=i.call(t,o),s.splice(a,1),a--}return r}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=i.log||e.log||console.log.bind(console);c.apply(t,s)}r.enabled=!1,i.enabled=!0;var o=e.enabled(t)?i:r;return o.namespace=t,o}function o(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,i=0;n>i;i++)r[i]&&(t=r[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;n>r;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;n>r;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=i,e.coerce=c,e.disable=s,e.enable=o,e.enabled=a,e.humanize=r(34),e.names=[],e.skips=[],e.formatters={};var u,l=0},function(t,e){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function i(t){return o(t,u,"day")||o(t,c,"hour")||o(t,a,"minute")||o(t,s,"second")||t+" ms"}function o(t,e,r){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,l=365.25*u;t.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e["long"]?i(t):n(t)}},function(t,e){t.exports.envVars={dataCollectorUrl:"https://collector.schibsted.io/api/v1/track",userServiceUrl:"https://cis.schibsted.com/api/v1/identify",errorReportingUrl:""}},function(t,e){t.exports.envVars={dataCollectorUrl:"http://127.0.0.1:8002/api/v1/track",userServiceUrl:"https://cis.schibsted.com/api/v1/identify",errorReportingUrl:""}},function(t,e,r){"use strict";function n(t){if(!t)throw new Error("activity required");this.activity=t,this.contentId=t.contentId,this.contentType=t.contentType}var i=r(38);n.prototype.trackContentView=function(t){var e=this.activity.createScaffold(!0);return e["@type"]="View",e.object=this.addPageStandards(),e.object.displayName=t||document.title,document.referrer&&(e.origin={url:document.referrer}),new i(this.activity,e,["object","origin"])},n.prototype.trackPageLoad=function(t,e){return e=e,this.trackContentView(t)},n.prototype.trackForm=function(t,e,r){var n=this.activity.createScaffold();return n["@type"]=r||"Post",n.object={"@id":this.getUrnIdWithContentType()+":form:"+t},n.origin=this.addPageStandards(),n.result={"@type":e,"@id":this.getUrnIdWithContentType()+":form:"+t},new i(this.activity,n,["object","result","origin"])},n.prototype.trackComment=function(t,e){return this.trackForm(t,"Note",e)},n.prototype.trackPoll=function(t,e){return this.trackForm(t,"Question",e)},n.prototype.trackClick=function(t,e,r,n,o){var s=this.activity.createScaffold();return s["@type"]=o||"Accept",s.object={"@id":this.getUrnIdWithContentType(n,r)+":element:"+t,"@type":"Link",displayName:e},s.target={"@id":this.getUrnIdWithContentType(n,r),"@type":r},new i(this.activity,s,["object","target"])},n.prototype.trackSocial=function(t,e,r){var n=this.activity.createScaffold();return n["@type"]=r||"Like",n.object=this.addPageStandards(),n.origin={"@id":this.getUrnIdWithContentType()+":element:"+t,"@type":"Link"},n.target={"@id":"urn:"+e.toLowerCase()+":action:"+n["@type"].toLowerCase(),"@type":"Service"},new i(this.activity,n,["object","origin","target"])},n.prototype.trackMediaState=function(t,e,r){var n=this.activity.createScaffold();return n["@type"]=r||"Watch",n.object={"@type":e,"@id":this.getUrnIdWithContentType()+":"+e+":"+t},n.origin=this.addPageStandards(),new i(this.activity,n,["object","origin"])},n.prototype.trackScroll=function(t,e){var r=this.activity.createScaffold();return r["@type"]=e||"Arrive",r.object=this.addPageStandards(),r.result={"@type":"Place","@id":this.getUrnIdWithContentType()+":scroll:"+t,"spt:depth":t},new i(this.activity,r,["object","result"])},n.prototype.trackVisibility=function(t,e,r){if("undefined"==typeof e)throw new Error("No time parameter was passed to this function");var n=this.activity.createScaffold();return n["@type"]=r||"View",n.origin=this.addPageStandards(),n.object={"@type":"Content","@id":this.getUrnIdWithContentType()+":element:"+t},e.start?n.object.startTime=e.start:e&&!e.end&&(n.object.startTime=e),e.end&&(n.object.endTime=e.end),new i(this.activity,n,["origin","object"])},n.prototype.trackExit=function(t,e,r){var n=this.activity.createScaffold();return n["@type"]=r||"Leave",n.object=this.addPageStandards(),n.target={},"undefined"!=typeof t&&"undefined"!=typeof e&&(n.target={"@type":e,"@id":this.getUrnIdWithContentType(t,e)}),new i(this.activity,n,["object","target"])},n.prototype.trackEngagementTime=function(t,e){var r=this.activity.createScaffold();return r["@type"]=e||"View",r.object=this.addPageStandards(),r.duration=t,new i(this.activity,r,["object"])},n.prototype.trackCustomEvent=function(t,e){var r=this.activity.createScaffold(),n=[];if(!e||!t)throw new Error("activityType and obj is required");r["@type"]=e;for(var o in t)r[o]=t[o],n.push(o);return new i(this.activity,r,n)},n.prototype.addPageStandards=function(){var t={};
return t["@type"]=this.activity.contentType,String(this.activity.contentId).indexOf("urn:")>-1?t["@id"]=this.activity.contentId:t["@id"]=this.getUrnIdWithContentType(this.activity.contentId),t.url=document.URL,t.displayName=document.title,this.addCategoryToEvents(t)},n.prototype.addCategoryToEvents=function(t){var e=this.activity.opts,r="";return e.provider=e.provider||{},e.object=e.object||{},e.category?r=e.category:e.object.category?r=e.object.category:e.provider.category&&(r=e.provider.category),Array.isArray(r)&&(r=r.toString()),r&&(t.category=r),t},n.prototype.getUrnIdWithContentType=function(t,e){var r=t||this.activity.contentId;if(-1===String(r).indexOf("urn:")){var n=e||this.activity.contentType,i=this.getDomainFromUrl(document.URL);return"urn:"+i+":"+n.toLowerCase()+":"+r}return r},n.prototype.getDomainFromUrl=function(t){var e=t.match(/^https?\:\/\/(www.)?([^\/:?#]+)(?:[\/:?#]|$)/i);return e&&e[2]},t.exports=n},function(t,e){"use strict";function r(t,e,r){if(!t)throw new Error("activity required");if(!e)throw new Error("data required");this.activity=t,this.data=e,this.objectOrder=r||[]}r.prototype.queue=function(){this.activity.addToQueue(this.data)},r.prototype.send=function(t){this.activity.send(this.data,t)},r.prototype.addProperty=function(t,e,r){var n=this.getObjectKey(t);return this.data[n][e]=r,this},r.prototype.addCustomData=function(t,e){var r=this.getObjectKey(t);return this.data[r]["spt:custom"]=e,this},r.prototype.getObjectKey=function(t){if("primary"===t)return this.objectOrder[0];if("secondary"===t)return this.objectOrder[1];if("tertiary"===t)return this.objectOrder[2];throw new Error("Object reference not valid")},t.exports=r},function(t,e,r){"use strict";var n={};try{n=r(35)}catch(i){n=r(36)}var o=r(40);t.exports.retry=function(t,e,r){if(!t||"number"!=typeof t)throw new Error("times required");if(!e||"function"!=typeof e)throw new Error("task required");if(!r||"function"!=typeof r)throw new Error("callback required");var n=1,i=function(){arguments[0]&&n>=t?r.apply(null,arguments):arguments[0]?(n+=1,e(i)):r.apply(null,arguments)};e(i)},t.exports.getViewportDimensions=function(){var t,e;return"undefined"!=typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.getElementsByTagName("body")[0].clientWidth,e=document.getElementsByTagName("body")[0].clientHeight),t+"x"+e},t.exports.getDeviceLanguage=function(){var t;return navigator.userLanguage?t=navigator.userLanguage:navigator.language&&(t=navigator.language),t},t.exports.getTimestamp=function(){var t=new Date,e=-t.getTimezoneOffset(),r=e>=0?"+":"-",n=function(t){var e=Math.abs(Math.floor(t));return(10>e?"0":"")+e},i=t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate());return i=i+"T"+n(t.getHours())+":"+n(t.getMinutes()),i=i+":"+n(t.getSeconds()),i=i+r+n(e/60)+":"+n(e%60)},t.exports.getUuidV4=function(){for(var t="",e=0;36>e;e++){var r=null;r=14===e?4:19===e?Math.floor(4*Math.random()+8).toString(16):8===e||13===e||18===e||23===e?"-":Math.floor(16*Math.random()).toString(16),t+=r}return t},t.exports.sendErrorReport=function(t){var e={errorCode:"GENERAL_ACTIVITY_ERROR",errorMessage:"Something went wrong",sdkType:"JS",sdkVersion:n.envVars.sdkVersion,options:{clientId:"abc",dataCollectorUrl:n.envVars.dataCollectorUrl,anonymousIdentityUrl:n.envVars.userServiceUrl,errorReportingUrl:n.envVars.errorReportingUrl,retries:t}};o(n.envVars.errorReportingUrl,e)},t.exports.getQueryVariable=function(t){for(var e=window.location.search.substring(1),r=e.split("&"),n=0;n<r.length;n++){var i=r[n].split("=");if(i[0]===t)return i[1]}for(r=e.split("&amp"),n=0;n<r.length;n++){var o=r[n].split("=");if(o[0]===t)return o[1]}return void 0}},function(t,e,r){"use strict";function n(t,e,r,n){if(!r)throw new Error("callback required");return t?e&&"object"==typeof e?(n=n||!1,void i.retry(3,function(r){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&(200===this.status?r(null,i):r("Failed with status "+this.status))},i.open("POST",t),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=n;try{i.send(JSON.stringify(e))}catch(o){r(o.name+": "+o.message)}},r)):r("data required"):r("url required")}var i=r(39);t.exports=n},function(t,e,r){"use strict";function n(t){t=t||{},this.idObj={},this.cookieKey="_pulse2data",this.cookiesAllowed=navigator.cookieEnabled,this.anonIdPlaceholder="x",this.opts=t,this.visitorIdPlaceholder="v",this.redirectString="https://cis.schibsted.com/redirect/?redirectUrl="+document.location,this.userServiceUrl=t.userServiceUrl||s.envVars.userServiceUrl,this.transport=t.transport||i,this.utils=t.utils||o,this.noRedirect=void 0!==t.noRedirect?t.noRedirect:!0}var i=r(40),o=r(39),s={};try{s=r(35)}catch(a){s=r(36)}n.prototype.getUserId=function(t){var e=this.getIdsFromCookie();return t=t||function(){},this.opts.userId&&(e.userId=this.opts.userId),this.mapUserData(e),this.idObj.envId&&!this.userStatusHasChanged()?t(null,this.idObj):void this.getIdsFromService(this.idObj,function(e,r){return this.onIdServiceResponse(e,r,t)}.bind(this))},n.prototype.mapUserData=function(t){this.idObj.userId=t.userId||this.idObj.userId,this.idObj.envId=t.environmentId,this.idObj.prevUserId=t.prevUserId,this.setIdsInCookie()},n.prototype.setIdsInCookie=function(){if(this.idObj.envId){var t=new Date,e=t.getTime();t.setTime(e+9e5);var r=[this.idObj.envId,this.visitorIdPlaceholder,this.idObj.userId||this.anonIdPlaceholder];document.cookie=this.cookieKey+"="+r+";expires="+t.toUTCString()}},n.prototype.getIdsFromCookie=function(){var t=this.getCookie(this.cookieKey);if(!t||-1!==t.indexOf("undefined"))return this.deleteCookie(this.cookieKey),{};var e=t.split(",");if(e.length<2)return this.deleteCookie(this.cookieKey),{};var r={environmentId:e[0],prevUserId:e[2]};return r},n.prototype.getCookie=function(t){var e=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||void 0;return e},n.prototype.deleteCookie=function(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT"},n.prototype.getIdsFromService=function(t,e){var r=this.userServiceUrl;this.transport(r,t,function(t,r){if(t)return e(t);var n=JSON.parse(r.response||r.responseText);this.mapUserData(n.data),e(null,n.data)}.bind(this),!0)},n.prototype.onIdServiceResponse=function(t,e,r){return t&&r(t),this.utils.getQueryVariable("failedToSetCookie")?r(null,this.idObj):e.cisCookieSet||!this.cookiesAllowed?r(null,this.idObj):this.confirmIdServiceCookie(this,r)},n.prototype.confirmIdServiceCookie=function(t){this.getIdsFromService(this.idObj,function(e,r){return e?t(e):(this.resolveRedirect(r),void t(null,this.idObj))}.bind(this))},n.prototype.resolveRedirect=function(t){t.cisCookieSet||this.noRedirect||this.doRedirect(this.redirectString)},n.prototype.doRedirect=function(t){this.noRedirect||(window.location.href=t)},n.prototype.userStatusHasChanged=function(){var t=this.idObj.userId,e=this.idObj.prevUserId;return e?t&&e!==t.toString()||!t&&e!==this.anonIdPlaceholder:!1},t.exports=n},function(t,e){t.exports={name:"schibsted-event-tracking",version:"0.7.1",main:"lib/activity.js",repository:{type:"git",url:"git@github.com:schibsted/sdk-js-event-tracking.git"},bugs:{url:"https://github.com/schibsted/sdk-js-event-tracking/issues"},dependencies:{webpack:"^1.5.3",debug:"^2.1.1"},devDependencies:{chai:"^2.0.0","concat-files":"^0.1.0",extend:"^3.0.0",fs:"0.0.2",grunt:"~0.4.1","grunt-contrib-jshint":"^0.11.0","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-watch":"^0.6.1","grunt-http-server":"^1.3.0","grunt-jscs":"^1.5.0","grunt-jsdoc":"^0.5.7","grunt-karma":"^0.12.0","grunt-nightwatch":"^0.4.6","grunt-shell":"^1.1.1","grunt-webpack":"^1.0.8","istanbul-instrumenter-loader":"^0.1.2",jscs:"^1.11.3",jshint:"^2.6.0","json-loader":"^0.5.2","karma-browserstack-launcher":"^0.1.2","karma-chrome-launcher":"^0.1.7","karma-coverage":"^0.2.7","karma-mocha":"^0.1.10","karma-phantomjs-launcher":"^0.1.4","karma-sinon-chai":"^0.3.0","karma-webpack":"^1.5.0",mkdirp:"^0.5.1",mocha:"^2.1.0",nightwatch:"^0.6.5",phantomjs:"1.9.13","phantomjs-polyfill":"0.0.1",sinon:"^1.12.2","type-of-is":"^3.4.0","webpack-dev-server":"^1.7.0"},engines:{node:"0.12.x"},scripts:{test:"jshint . && jscs . && ./node_modules/karma/bin/karma start karma.conf1.js --single-run && grunt integration",lint:"jshint . && jscs .",build:"node buildscript/buildFiles.js --build"},_id:"schibsted-event-tracking@0.7.1",dist:{shasum:"6b877b4d2024918d5fbfaa9fa378272f94ffc36b",tarball:"https://npm.fury.io/app37043551_heroku_com/schibsted-event-tracking/-/0.7.1.tgz?auth=-myFxpiV8kr-MATnzZiw"},_shasum:"6b877b4d2024918d5fbfaa9fa378272f94ffc36b",_resolved:"https://npm.fury.io/app37043551_heroku_com/schibsted-event-tracking/-/0.7.1.tgz?auth=-myFxpiV8kr-MATnzZiw",_from:"schibsted-event-tracking@>=0.7.1 <0.8.0"}},function(t,e){"use strict";function r(t){return 10>t?"0"+t:t}t.exports.requireOpts=function(t,e){for(var r=0;r<e.length;r++)if(!t[e[r]])throw new Error(e[r]+" is required")},t.exports.windowHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight},t.exports.windowWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth},t.exports.documentHeight=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},t.exports.getUnixTimestamp=function(t){return t=t?(new Date).getTime(t):(new Date).getTime(),Math.round(t/1e3)},t.exports.isoToDate=function(t){var e=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/,r=e.exec(t);if(!r)throw new Error("Not ISO8601 date "+t);r={year:r[1],month:r[2],day:r[3],hour:r[4],minutes:r[5],seconds:r[6],ms:r[7],zoneUTC:r[8],zoneModifier:r[9],zoneHours:r[10],zoneMinutes:r[11]};for(var n=["month","hour","minutes","seconds","ms","zoneHour","zoneMinutes"],i=0;i<n.length;i++)r[n[i]]=Number(r[n[i]])||0;r.month=(Number(r.month)||1)-1,r.day=Number(r.day)||1;var o=0;return"Z"!==r.zoneUTC&&"undefined"!=typeof r.zoneModifier&&(o=60*r.zoneHours+r.zoneMinutes,"+"===r.zoneModifier&&(o=0-o)),new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minutes+o,r.seconds,r.ms))},t.exports.dateToISO=function(t){return t.getUTCFullYear()+"-"+r(t.getUTCMonth()+1)+"-"+r(t.getUTCDate())+"T"+r(t.getUTCHours())+":"+r(t.getUTCMinutes())+":"+r(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},t.exports.bind=function(t,e,r){t.addEventListener?t.addEventListener(e,r):t.attachEvent("on"+e,r)},t.exports.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},function(t,e,r){"use strict";function n(t,e){if(!t)throw new Error(e+" is required")}function i(t,e,r){n(t,"Pulse client"),n(e,"device"),n(r,"interval"),this.pulse=t,this.device=e,this.interval=r,this.scrollPosition=0,this.activeSeconds=0,this.lastActiveTime=0}var o=r(45),s=r(43);i.prototype.updateActivity=function(){var t=(window.pageYOffset||document.scrollTop)-(document.clientTop||0);t>this.scrollPosition&&(this.scrollPosition=t),this.lastActiveTime=s.getUnixTimestamp()},i.prototype.trackActivity=function(){var t,e=o(this.updateActivity.bind(this),500),r=["scroll","focus","resize"];for(t=0;t<r.length;t++)s.bind(window,r[t],e);var n=["beforeunload","focus","mousemove","mousedown","keydown"];for(t=0;t<n.length;t++)s.bind(document.body,n[t],e)},i.prototype.initialize=function(){this.trackActivity(),window.setInterval(function(){this.lastActiveTime<s.getUnixTimestamp()-this.interval||(this.activeSeconds+=this.interval,window.setTimeout(this.sendEvent.bind(this),2e3*Math.random()))}.bind(this),1e3*this.interval)},i.prototype.sendEvent=function(){var t=this.pulse.events.trackEngagementTime(1e3*this.activeSeconds);t.addCustomData("primary",{"spt:scrollPosition":this.scrollPosition,"spt:device":this.device}),t.send()},t.exports=i},function(t,e,r){function n(t,e,r){var n=!0,c=!0;if("function"!=typeof t)throw new TypeError(s);return r===!1?n=!1:o(r)&&(n="leading"in r?!!r.leading:n,c="trailing"in r?!!r.trailing:c),a.leading=n,a.maxWait=+e,a.trailing=c,i(t,e,a)}var i=r(46),o=r(11),s="Expected a function",a={leading:!1,maxWait:0,trailing:!1};t.exports=n},function(t,e,r){function n(t,e,r){function n(){y&&clearTimeout(y),p&&clearTimeout(p),p=y=v=void 0}function c(){var r=e-(o()-h);if(0>=r||r>e){p&&clearTimeout(p);var n=v;p=y=v=void 0,n&&(m=o(),f=t.apply(g,d),y||p||(d=g=null))}else y=setTimeout(c,r)}function u(){y&&clearTimeout(y),p=y=v=void 0,(w||b!==e)&&(m=o(),f=t.apply(g,d),y||p||(d=g=null))}function l(){if(d=arguments,h=o(),g=this,v=w&&(y||!I),b===!1)var r=I&&!y;else{p||I||(m=h);var n=b-(h-m),i=0>=n||n>b;i?(p&&(p=clearTimeout(p)),m=h,f=t.apply(g,d)):p||(p=setTimeout(u,n))}return i&&y?y=clearTimeout(y):y||e===b||(y=setTimeout(c,e)),r&&(i=!0,f=t.apply(g,d)),!i||y||p||(d=g=null),f}var d,p,f,h,g,y,v,m=0,b=!1,w=!0;if("function"!=typeof t)throw new TypeError(s);if(e=0>e?0:+e||0,r===!0){var I=!0;w=!1}else i(r)&&(I=r.leading,b="maxWait"in r&&a(+r.maxWait||0,e),w="trailing"in r?r.trailing:w);return l.cancel=n,l}var i=r(11),o=r(47),s="Expected a function",a=Math.max;t.exports=n},function(t,e,r){var n=r(6),i=n(i=Date.now)&&i,o=i||function(){return(new Date).getTime()};t.exports=o},function(t,e){"use strict";function r(){if(XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(t){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){throw new Error("This browser does not support AJAX")}}}function n(t,e,n){if(!t)throw new Error("Endpoint is required");if(!e)throw new Error("Prefix is required");if(!n)throw new Error("ArticleId is required");var i=r();"/"!==t.substr(-1)&&(t+="/"),i.onreadystatechange=function(){4===this.readyState&&200!==this.status&&window.console&&console.log("Failed benchmark with status "+this.status)},"undefined"==typeof JSON&&(e+="-legacy"),i.open("POST",t+e+"/"+n),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send()}t.exports=n}])});